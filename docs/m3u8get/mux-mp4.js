!function(a){var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.muxjs=a()}(function(){return function(){function a(b,c,d){function e(g,h){var i,j,k;if(!c[g]){if(!b[g]){if(i="function"==typeof require&&require,!h&&i)return i(g,!0);if(f)return f(g,!0);throw j=new Error("Cannot find module '"+g+"'"),j.code="MODULE_NOT_FOUND",j}k=c[g]={exports:{}},b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}return a}()({1:[function(a,b){"use strict";var d=a(31),e=a(2),f=function(){var a=new Uint8Array,b=0;f.prototype.init.call(this),this.setTimestamp=function(a){b=a},this.push=function(c){var g,h,i,j,d=0,f=0;for(a.length?(j=a.length,a=new Uint8Array(c.byteLength+j),a.set(a.subarray(0,j)),a.set(c,j)):a=c;a.length-f>=3;)if(a[f]!=="I".charCodeAt(0)||a[f+1]!=="D".charCodeAt(0)||a[f+2]!=="3".charCodeAt(0))if(255!==(255&a[f])||240!==(240&a[f+1]))f++;else{if(a.length-f<7)break;if(d=e.parseAdtsSize(a,f),f+d>a.length)break;i={type:"audio",data:a.subarray(f,f+d),pts:b,dts:b},this.trigger("data",i),f+=d}else{if(a.length-f<10)break;if(d=e.parseId3TagSize(a,f),f+d>a.length)break;h={type:"timed-metadata",data:a.subarray(f,f+d)},this.trigger("data",h),f+=d}g=a.length-f,a=g>0?a.subarray(f):new Uint8Array},this.reset=function(){a=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){a=new Uint8Array,this.trigger("endedtimeline")}};f.prototype=new d,b.exports=f},{2:2,31:31}],2:[function(a,b){"use strict";var d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],e=function(a,b){var c=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9],d=a[b+5],e=(16&d)>>4;return c=c>=0?c:0,e?c+20:c+10},f=function(a,b){return a.length-b<10||a[b]!=="I".charCodeAt(0)||a[b+1]!=="D".charCodeAt(0)||a[b+2]!=="3".charCodeAt(0)?b:(b+=e(a,b),f(a,b))},g=function(a){var b=f(a,0);return a.length>=b+2&&255===(255&a[b])&&240===(240&a[b+1])&&16===(22&a[b+1])},h=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},i=function(a,b,c){var d,e="";for(d=b;c>d;d++)e+="%"+("00"+a[d].toString(16)).slice(-2);return e},j=function(a,b,c){return unescape(i(a,b,c))},k=function(a,b){var c=(224&a[b+5])>>5,d=a[b+4]<<3,e=6144&a[b+3];return e|d|c},l=function(a,b){return a[b]==="I".charCodeAt(0)&&a[b+1]==="D".charCodeAt(0)&&a[b+2]==="3".charCodeAt(0)?"timed-metadata":a[b]&!0&&240===(240&a[b+1])?"audio":null},m=function(a){for(var b=0;b+5<a.length;){if(255===a[b]&&240===(246&a[b+1]))return d[(60&a[b+2])>>>2];b++}return null},n=function(a){var c,d,e,f,g,i,k,b=10;64&a[5]&&(b+=4,b+=h(a.subarray(10,14)));do{if(c=h(a.subarray(b+4,b+8)),1>c)return null;if(e=String.fromCharCode(a[b],a[b+1],a[b+2],a[b+3]),"PRIV"===e)for(d=a.subarray(b+10,b+c+10),f=0;f<d.byteLength;f++)if(0===d[f]){if(g=j(d,0,f),"com.apple.streaming.transportStreamTimestamp"===g)return i=d.subarray(f+1),k=(1&i[3])<<30|i[4]<<22|i[5]<<14|i[6]<<6|i[7]>>>2,k*=4,k+=3&i[7];break}b+=10,b+=c}while(b<a.byteLength);return null};b.exports={isLikelyAacData:g,parseId3TagSize:e,parseAdtsSize:k,parseType:l,parseSampleRate:m,parseAacTimestamp:n}},{}],3:[function(a,b){"use strict";var d=a(31),e=a(29).ONE_SECOND_IN_TS,g=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],f=function(a){var b,c=0;f.prototype.init.call(this),this.push=function(d){var h,i,j,k,l,m,f=0;if(a||(c=0),"audio"===d.type)for(b?(k=b,b=new Uint8Array(k.byteLength+d.data.byteLength),b.set(k),b.set(d.data,k.byteLength)):b=d.data;f+5<b.length;)if(255===b[f]&&240===(246&b[f+1])){if(i=2*(1&~b[f+1]),h=(3&b[f+3])<<11|b[f+4]<<3|(224&b[f+5])>>5,l=1024*((3&b[f+6])+1),m=l*e/g[(60&b[f+2])>>>2],j=f+h,b.byteLength<j)return;if(this.trigger("data",{pts:d.pts+c*m,dts:d.dts+c*m,sampleCount:l,audioobjecttype:(3&b[f+2]>>>6)+1,channelcount:(1&b[f+2])<<2|(192&b[f+3])>>>6,samplerate:g[(60&b[f+2])>>>2],samplingfrequencyindex:(60&b[f+2])>>>2,samplesize:16,data:b.subarray(f+7+i,j)}),c++,b.byteLength===j)return b=void 0,void 0;b=b.subarray(j)}else f++},this.flush=function(){c=0,this.trigger("done")},this.reset=function(){b=void 0,this.trigger("reset")},this.endTimeline=function(){b=void 0,this.trigger("endedtimeline")}};f.prototype=new d,b.exports=f},{29:29,31:31}],4:[function(a,b){"use strict";var f,h,d=a(31),e=a(30),g=function(){var b,c,a=0;g.prototype.init.call(this),this.push=function(d){var e,f;for(c?(e=new Uint8Array(c.byteLength+d.data.byteLength),e.set(c),e.set(d.data,c.byteLength),c=e):c=d.data,f=c.byteLength;f-3>a;a++)if(1===c[a+2]){b=a+5;break}for(;f>b;)switch(c[b]){case 0:if(0!==c[b-1]){b+=2;break}if(0!==c[b-2]){b++;break}a+3!==b-2&&this.trigger("data",c.subarray(a+3,b-2));do b++;while(1!==c[b]&&f>b);a=b-2,b+=3;break;case 1:if(0!==c[b-1]||0!==c[b-2]){b+=3;break}this.trigger("data",c.subarray(a+3,b-2)),a=b-2,b+=3;break;default:b+=3}c=c.subarray(a),b-=a,a=0},this.reset=function(){c=null,a=0,this.trigger("reset")},this.flush=function(){c&&c.byteLength>3&&this.trigger("data",c.subarray(a+3)),c=null,a=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}};g.prototype=new d,h={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},f=function(){var b,c,d,i,j,k,l,a=new g;f.prototype.init.call(this),b=this,this.push=function(b){"video"===b.type&&(c=b.trackId,d=b.pts,i=b.dts,a.push(b))},a.on("data",function(a){var e={trackId:c,pts:d,dts:i,data:a};switch(31&a[0]){case 5:e.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:e.nalUnitType="sei_rbsp",e.escapedRBSP=j(a.subarray(1));break;case 7:e.nalUnitType="seq_parameter_set_rbsp",e.escapedRBSP=j(a.subarray(1)),e.config=k(e.escapedRBSP);break;case 8:e.nalUnitType="pic_parameter_set_rbsp";break;case 9:e.nalUnitType="access_unit_delimiter_rbsp"}b.trigger("data",e)}),a.on("done",function(){b.trigger("done")}),a.on("partialdone",function(){b.trigger("partialdone")}),a.on("reset",function(){b.trigger("reset")}),a.on("endedtimeline",function(){b.trigger("endedtimeline")}),this.flush=function(){a.flush()},this.partialFlush=function(){a.partialFlush()},this.reset=function(){a.reset()},this.endTimeline=function(){a.endTimeline()},l=function(a,b){var e,f,c=8,d=8;for(e=0;a>e;e++)0!==d&&(f=b.readExpGolomb(),d=(c+f+256)%256),c=0===d?c:d},j=function(a){for(var e,f,g,b=a.byteLength,c=[],d=1;b-2>d;)0===a[d]&&0===a[d+1]&&3===a[d+2]?(c.push(d+2),d+=2):d++;if(0===c.length)return a;for(e=b-c.length,f=new Uint8Array(e),g=0,d=0;e>d;g++,d++)g===c[0]&&(g++,c.shift()),f[d]=a[g];return f},k=function(a){var i,j,k,m,n,o,p,q,r,s,t,u,v,w,b=0,c=0,d=0,f=0,g=1;if(i=new e(a),j=i.readUnsignedByte(),m=i.readUnsignedByte(),k=i.readUnsignedByte(),i.skipUnsignedExpGolomb(),h[j]&&(n=i.readUnsignedExpGolomb(),3===n&&i.skipBits(1),i.skipUnsignedExpGolomb(),i.skipUnsignedExpGolomb(),i.skipBits(1),i.readBoolean()))for(t=3!==n?8:12,w=0;t>w;w++)i.readBoolean()&&(6>w?l(16,i):l(64,i));if(i.skipUnsignedExpGolomb(),o=i.readUnsignedExpGolomb(),0===o)i.readUnsignedExpGolomb();else if(1===o)for(i.skipBits(1),i.skipExpGolomb(),i.skipExpGolomb(),p=i.readUnsignedExpGolomb(),w=0;p>w;w++)i.skipExpGolomb();if(i.skipUnsignedExpGolomb(),i.skipBits(1),q=i.readUnsignedExpGolomb(),r=i.readUnsignedExpGolomb(),s=i.readBits(1),0===s&&i.skipBits(1),i.skipBits(1),i.readBoolean()&&(b=i.readUnsignedExpGolomb(),c=i.readUnsignedExpGolomb(),d=i.readUnsignedExpGolomb(),f=i.readUnsignedExpGolomb()),i.readBoolean()&&i.readBoolean()){switch(v=i.readUnsignedByte()){case 1:u=[1,1];break;case 2:u=[12,11];break;case 3:u=[10,11];break;case 4:u=[16,11];break;case 5:u=[40,33];break;case 6:u=[24,11];break;case 7:u=[20,11];break;case 8:u=[32,11];break;case 9:u=[80,33];break;case 10:u=[18,11];break;case 11:u=[15,11];break;case 12:u=[64,33];break;case 13:u=[160,99];break;case 14:u=[4,3];break;case 15:u=[3,2];break;case 16:u=[2,1];break;case 255:u=[i.readUnsignedByte()<<8|i.readUnsignedByte(),i.readUnsignedByte()<<8|i.readUnsignedByte()]}u&&(g=u[0]/u[1])}return{profileIdc:j,levelIdc:k,profileCompatibility:m,width:Math.ceil((16*(q+1)-2*b-2*c)*g),height:16*(2-s)*(r+1)-2*d-2*f,sarRatio:u}}},f.prototype=new d,b.exports={H264Stream:f,NalByteStream:g}},{30:30,31:31}],5:[function(a,b){var d=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"];b.exports=d},{}],6:[function(a,b){var d=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"];b.exports=d},{}],7:[function(a,b){var h,d=[33,16,5,32,164,27],e=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],f=function(a){for(var b=[];a--;)b.push(0);return b},g=function(a){return Object.keys(a).reduce(function(b,c){return b[c]=new Uint8Array(a[c].reduce(function(a,b){return a.concat(b)},[])),b},{})};b.exports=function(){if(!h){var a={96e3:[d,[227,64],f(154),[56]],88200:[d,[231],f(170),[56]],64e3:[d,[248,192],f(240),[56]],48e3:[d,[255,192],f(268),[55,148,128],f(54),[112]],44100:[d,[255,192],f(268),[55,163,128],f(84),[112]],32e3:[d,[255,192],f(268),[55,234],f(226),[112]],24e3:[d,[255,192],f(268),[55,255,128],f(268),[111,112],f(126),[224]],16e3:[d,[255,192],f(268),[55,255,128],f(268),[111,255],f(269),[223,108],f(195),[1,192]],12e3:[e,f(268),[3,127,248],f(268),[6,255,240],f(268),[13,255,224],f(268),[27,253,128],f(259),[56]],11025:[e,f(268),[3,127,248],f(268),[6,255,240],f(268),[13,255,224],f(268),[27,255,192],f(268),[55,175,128],f(108),[112]],8e3:[e,f(268),[3,121,16],f(47),[7]]};h=g(a)}return h}},{}],8:[function(a,b){"use strict";var g,h,i,j,k,l,d=a(31),e=a(23),f=function(){f.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new l(0,0),new l(0,1),new l(1,0),new l(1,1)],this.reset(),this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data")),a.on("partialdone",this.trigger.bind(this,"partialdone")),a.on("done",this.trigger.bind(this,"done"))},this)};f.prototype=new d,f.prototype.push=function(a){var b,c,d;if("sei_rbsp"===a.nalUnitType&&(b=e.parseSei(a.escapedRBSP),b.payloadType===e.USER_DATA_REGISTERED_ITU_T_T35&&(c=e.parseUserData(b)))){if(a.dts<this.latestDts_)return this.ignoreNextEqualDts_=!0,void 0;if(a.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1),void 0;d=e.parseCaptionPackets(a.pts,c),this.captionPackets_=this.captionPackets_.concat(d),this.latestDts_!==a.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=a.dts}},f.prototype.flushCCStreams=function(a){this.ccStreams_.forEach(function(b){return"flush"===a?b.flush():b.partialFlush()},this)},f.prototype.flushStream=function(a){return this.captionPackets_.length?(this.captionPackets_.forEach(function(a,b){a.presortIndex=b}),this.captionPackets_.sort(function(a,b){return a.pts===b.pts?a.presortIndex-b.presortIndex:a.pts-b.pts}),this.captionPackets_.forEach(function(a){a.type<2&&this.dispatchCea608Packet(a)},this),this.captionPackets_.length=0,this.flushCCStreams(a),void 0):(this.flushCCStreams(a),void 0)},f.prototype.flush=function(){return this.flushStream("flush")},f.prototype.partialFlush=function(){return this.flushStream("partialFlush")},f.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(a){a.reset()})},f.prototype.dispatchCea608Packet=function(a){this.setsTextOrXDSActive(a)?this.activeCea608Channel_[a.type]=null:this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1),null!==this.activeCea608Channel_[a.type]&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)},f.prototype.setsChannel1Active=function(a){return 4096===(30720&a.ccData)},f.prototype.setsChannel2Active=function(a){return 6144===(30720&a.ccData)},f.prototype.setsTextOrXDSActive=function(a){return 256===(28928&a.ccData)||4138===(30974&a.ccData)||6186===(30974&a.ccData)},g={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},h=function(a){return null===a?"":(a=g[a]||a,String.fromCharCode(a))},i=14,j=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],k=function(){for(var a=[],b=i+1;b--;)a.push("");return a},l=function(a,b){l.prototype.init.call(this),this.field_=a||0,this.dataChannel_=b||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(a){var c,d,e,f,g,b=32639&a.ccData;return b===this.lastControlCode_?(this.lastControlCode_=null,void 0):(4096===(61440&b)?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null),d=b>>>8,e=255&b,b!==this.PADDING_&&(b===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":b===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(a.pts),this.flushDisplayed(a.pts),c=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=c,this.startPts_=a.pts):b===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(a.pts)):b===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(a.pts)):b===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(a.pts)):b===this.CARRIAGE_RETURN_?(this.clearFormatting(a.pts),this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts):b===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):b===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(a.pts),this.displayed_=k()):b===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=k():b===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(a.pts),this.displayed_=k()),this.mode_="paintOn",this.startPts_=a.pts):this.isSpecialCharacter(d,e)?(d=(3&d)<<8,f=h(d|e),this[this.mode_](a.pts,f),this.column_++):this.isExtCharacter(d,e)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),d=(3&d)<<8,f=h(d|e),this[this.mode_](a.pts,f),this.column_++):this.isMidRowCode(d,e)?(this.clearFormatting(a.pts),this[this.mode_](a.pts," "),this.column_++,14===(14&e)&&this.addFormatting(a.pts,["i"]),1===(1&e)&&this.addFormatting(a.pts,["u"])):this.isOffsetControlCode(d,e)?this.column_+=3&e:this.isPAC(d,e)?(g=j.indexOf(7968&b),"rollUp"===this.mode_&&(g-this.rollUpRows_+1<0&&(g=this.rollUpRows_-1),this.setRollUp(a.pts,g)),g!==this.row_&&(this.clearFormatting(a.pts),this.row_=g),1&e&&-1===this.formatting_.indexOf("u")&&this.addFormatting(a.pts,["u"]),16===(16&b)&&(this.column_=4*((14&b)>>1)),this.isColorPAC(e)&&14===(14&e)&&this.addFormatting(a.pts,["i"])):this.isNormalChar(d)&&(0===e&&(e=null),f=h(d),f+=h(e),this[this.mode_](a.pts,f),this.column_+=f.length)),void 0)}},l.prototype=new d,l.prototype.flushDisplayed=function(a){var b=this.displayed_.map(function(a){try{return a.trim()}catch(b){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");b.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:b,stream:this.name_})},l.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=k(),this.nonDisplayed_=k(),this.lastControlCode_=null,this.column_=0,this.row_=i,this.rollUpRows_=2,this.formatting_=[]},l.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},l.prototype.isSpecialCharacter=function(a,b){return a===this.EXT_&&b>=48&&63>=b},l.prototype.isExtCharacter=function(a,b){return(a===this.EXT_+1||a===this.EXT_+2)&&b>=32&&63>=b},l.prototype.isMidRowCode=function(a,b){return a===this.EXT_&&b>=32&&47>=b},l.prototype.isOffsetControlCode=function(a,b){return a===this.OFFSET_&&b>=33&&35>=b},l.prototype.isPAC=function(a,b){return a>=this.BASE_&&a<this.BASE_+8&&b>=64&&127>=b},l.prototype.isColorPAC=function(a){return a>=64&&79>=a||a>=96&&127>=a},l.prototype.isNormalChar=function(a){return a>=32&&127>=a},l.prototype.setRollUp=function(a,b){if("rollUp"!==this.mode_&&(this.row_=i,this.mode_="rollUp",this.flushDisplayed(a),this.nonDisplayed_=k(),this.displayed_=k()),void 0!==b&&b!==this.row_)for(var c=0;c<this.rollUpRows_;c++)this.displayed_[b-c]=this.displayed_[this.row_-c],this.displayed_[this.row_-c]="";void 0===b&&(b=this.row_),this.topRow_=b-this.rollUpRows_+1},l.prototype.addFormatting=function(a,b){this.formatting_=this.formatting_.concat(b);var c=b.reduce(function(a,b){return a+"<"+b+">"},"");this[this.mode_](a,c)},l.prototype.clearFormatting=function(a){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(a,b){return a+"</"+b+">"},"");this.formatting_=[],this[this.mode_](a,b)}},l.prototype.popOn=function(a,b){var c=this.nonDisplayed_[this.row_];c+=b,this.nonDisplayed_[this.row_]=c},l.prototype.rollUp=function(a,b){var c=this.displayed_[this.row_];c+=b,this.displayed_[this.row_]=c},l.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]="";for(a=this.row_+1;i+1>a;a++)this.displayed_[a]="";for(a=this.topRow_;a<this.row_;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[this.row_]=""},l.prototype.paintOn=function(a,b){var c=this.displayed_[this.row_];c+=b,this.displayed_[this.row_]=c},b.exports={CaptionStream:f,Cea608Stream:l}},{23:23,31:31}],9:[function(a,b){"use strict";var i,j,m,n,d=a(31),e=a(8),f=a(11),g=a(12).TimestampRolloverStream,k=188,l=71,h=function(){var a=new Uint8Array(k),b=0;h.prototype.init.call(this),this.push=function(c){var f,d=0,e=k;for(b?(f=new Uint8Array(c.byteLength+b),f.set(a.subarray(0,b)),f.set(c,b),b=0):f=c;e<f.byteLength;)f[d]!==l||f[e]!==l?(d++,e++):(this.trigger("data",f.subarray(d,e)),d+=k,e+=k);d<f.byteLength&&(a.set(f.subarray(d),0),b=f.byteLength-d)},this.flush=function(){b===k&&a[0]===l&&(this.trigger("data",a),b=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){b=0,this.trigger("reset")}};h.prototype=new d,i=function(){var a,b,c,d;i.prototype.init.call(this),d=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,a=function(a,d){var e=0;d.payloadUnitStartIndicator&&(e+=a[e]+1),"pat"===d.type?b(a.subarray(e),d):c(a.subarray(e),d)},b=function(a,b){b.section_number=a[7],b.last_section_number=a[8],d.pmtPid=(31&a[10])<<8|a[11],b.pmtPid=d.pmtPid},c=function(a,b){var c,e,g,h,i,j;if(1&a[5]){for(d.programMapTable={video:null,audio:null,"timed-metadata":{}},c=(15&a[1])<<8|a[2],e=3+c-4,g=(15&a[10])<<8|a[11],h=12+g;e>h;)i=a[h],j=(31&a[h+1])<<8|a[h+2],i===f.H264_STREAM_TYPE&&null===d.programMapTable.video?d.programMapTable.video=j:i===f.ADTS_STREAM_TYPE&&null===d.programMapTable.audio?d.programMapTable.audio=j:i===f.METADATA_STREAM_TYPE&&(d.programMapTable["timed-metadata"][j]=i),h+=((15&a[h+3])<<8|a[h+4])+5;b.programMapTable=d.programMapTable}},this.push=function(b){var c={},d=4;if(c.payloadUnitStartIndicator=!!(64&b[1]),c.pid=31&b[1],c.pid<<=8,c.pid|=b[2],(48&b[3])>>>4>1&&(d+=b[d]+1),0===c.pid)c.type="pat",a(b.subarray(d),c),this.trigger("data",c);else if(c.pid===this.pmtPid)for(c.type="pmt",a(b.subarray(d),c),this.trigger("data",c);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([b,d,c]):this.processPes_(b,d,c)},this.processPes_=function(a,b,c){c.streamType=c.pid===this.programMapTable.video?f.H264_STREAM_TYPE:c.pid===this.programMapTable.audio?f.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][c.pid],c.type="pes",c.data=a.subarray(b),this.trigger("data",c)}},i.prototype=new d,i.STREAM_TYPES={h264:27,adts:15},j=function(){var e,a=this,b={data:[],size:0},c={data:[],size:0},d={data:[],size:0},g=function(a,b){var c;b.packetLength=6+(a[4]<<8|a[5]),b.dataAlignmentIndicator=0!==(4&a[6]),c=a[7],192&c&&(b.pts=(14&a[9])<<27|(255&a[10])<<20|(254&a[11])<<12|(255&a[12])<<5|(254&a[13])>>>3,b.pts*=4,b.pts+=(6&a[13])>>>1,b.dts=b.pts,64&c&&(b.dts=(14&a[14])<<27|(255&a[15])<<20|(254&a[16])<<12|(255&a[17])<<5|(254&a[18])>>>3,b.dts*=4,b.dts+=(6&a[18])>>>1)),b.data=a.subarray(9+a[8])},h=function(b,c,d){var k,e=new Uint8Array(b.size),f={type:c},h=0,i=0,j=!1;if(b.data.length&&!(b.size<9)){for(f.trackId=b.data[0].pid,h=0;h<b.data.length;h++)k=b.data[h],e.set(k.data,i),i+=k.data.byteLength;g(e,f),j="video"===c||f.packetLength<=b.size,(d||j)&&(b.size=0,b.data.length=0),j&&a.trigger("data",f)}};j.prototype.init.call(this),this.push=function(g){({pat:function(){},pes:function(){var a,e;switch(g.streamType){case f.H264_STREAM_TYPE:a=b,e="video";break;case f.ADTS_STREAM_TYPE:a=c,e="audio";break;case f.METADATA_STREAM_TYPE:a=d,e="timed-metadata";break;default:return}g.payloadUnitStartIndicator&&h(a,e,!0),a.data.push(g),a.size+=g.data.byteLength},pmt:function(){var b={type:"metadata",tracks:[]};e=g.programMapTable,null!==e.video&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),a.trigger("data",b)}})[g.type]()},this.reset=function(){b.size=0,b.data.length=0,c.size=0,c.data.length=0,this.trigger("reset")},this.flushStreams_=function(){h(b,"video"),h(c,"audio"),h(d,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}},j.prototype=new d,m={PAT_PID:0,MP2T_PACKET_LENGTH:k,TransportPacketStream:h,TransportParseStream:i,ElementaryStream:j,TimestampRolloverStream:g,CaptionStream:e.CaptionStream,Cea608Stream:e.Cea608Stream,MetadataStream:a(10)};for(n in f)f.hasOwnProperty(n)&&(m[n]=f[n]);b.exports=m},{10:10,11:11,12:12,31:31,8:8}],10:[function(a,b){"use strict";var k,d=a(31),e=a(11),f=function(a,b,c){var d,e="";for(d=b;c>d;d++)e+="%"+("00"+a[d].toString(16)).slice(-2);return e},g=function(a,b,c){return decodeURIComponent(f(a,b,c))},h=function(a,b,c){return unescape(f(a,b,c))},i=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},j={TXXX:function(a){var b;if(3===a.data[0]){for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=g(a.data,1,b),a.value=g(a.data,b+1,a.data.length).replace(/\0*$/,"");break}a.data=a.value}},WXXX:function(a){var b;if(3===a.data[0])for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=g(a.data,1,b),a.url=g(a.data,b+1,a.data.length);break}},PRIV:function(a){var b;for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=h(a.data,0,b);break}a.privateData=a.data.subarray(b+1),a.data=a.privateData}};k=function(a){var g,b={debug:!(!a||!a.debug),descriptor:a&&a.descriptor},c=0,d=[],f=0;if(k.prototype.init.call(this),this.dispatchType=e.METADATA_STREAM_TYPE.toString(16),b.descriptor)for(g=0;g<b.descriptor.length;g++)this.dispatchType+=("00"+b.descriptor[g].toString(16)).slice(-2);this.push=function(a){var e,g,h,k,l,m,n,o;if("timed-metadata"===a.type){if(a.dataAlignmentIndicator&&(f=0,d.length=0),0===d.length&&(a.data.length<10||a.data[0]!=="I".charCodeAt(0)||a.data[1]!=="D".charCodeAt(0)||a.data[2]!=="3".charCodeAt(0)))return b.debug&&console.log("Skipping unrecognized metadata packet"),void 0;if(d.push(a),f+=a.data.byteLength,1===d.length&&(c=i(a.data.subarray(6,10)),c+=10),!(c>f)){for(e={data:new Uint8Array(c),frames:[],pts:d[0].pts,dts:d[0].dts},l=0;c>l;)e.data.set(d[0].data.subarray(0,c-l),l),l+=d[0].data.byteLength,f-=d[0].data.byteLength,d.shift();g=10,64&e.data[5]&&(g+=4,g+=i(e.data.subarray(10,14)),c-=i(e.data.subarray(16,20)));do{if(h=i(e.data.subarray(g+4,g+8)),1>h)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");m=String.fromCharCode(e.data[g],e.data[g+1],e.data[g+2],e.data[g+3]),k={id:m,data:e.data.subarray(g+10,g+h+10)},k.key=k.id,j[k.id]&&(j[k.id](k),"com.apple.streaming.transportStreamTimestamp"===k.owner&&(n=k.data,o=(1&n[3])<<30|n[4]<<22|n[5]<<14|n[6]<<6|n[7]>>>2,o*=4,o+=3&n[7],k.timeStamp=o,void 0===e.pts&&void 0===e.dts&&(e.pts=k.timeStamp,e.dts=k.timeStamp),this.trigger("timestamp",k))),e.frames.push(k),g+=10,g+=h}while(c>g);this.trigger("data",e)}}}},k.prototype=new d,b.exports=k},{11:11,31:31}],11:[function(a,b){"use strict";b.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],12:[function(a,b){"use strict";var d=a(31),e=8589934592,f=4294967296,g="shared",h=function(a,b){var c=1;for(a>b&&(c=-1);Math.abs(b-a)>f;)a+=c*e;return a},i=function(a){var b,c;i.prototype.init.call(this),this.type_=a||g,this.push=function(a){(this.type_===g||a.type===this.type_)&&(void 0===c&&(c=a.dts),a.dts=h(a.dts,c),a.pts=h(a.pts,c),b=a.dts,this.trigger("data",a))},this.flush=function(){c=b,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){c=void 0,b=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};i.prototype=new d,b.exports={TimestampRolloverStream:i,handleRollover:h}},{31:31}],13:[function(a,b){var d=a(7),e=a(29),f=function(a){var b,c,d=0;for(b=0;b<a.length;b++)c=a[b],d+=c.data.byteLength;return d},g=function(a,b,c,f){var g,l,m,n,h=0,i=0,j=0,k=0;if(b.length&&(g=e.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate),h=Math.ceil(e.ONE_SECOND_IN_TS/(a.samplerate/1024)),c&&f&&(i=g-Math.max(c,f),j=Math.floor(i/h),k=j*h),!(1>j||k>e.ONE_SECOND_IN_TS/2))){for(l=d()[a.samplerate],l||(l=b[0].data),m=0;j>m;m++)n=b[0],b.splice(0,0,{data:l,dts:n.dts-h,pts:n.pts-h});a.baseMediaDecodeTime-=Math.floor(e.videoTsToAudioTs(k,a.samplerate))}},h=function(a,b,c){return b.minSegmentDts>=c?a:(b.minSegmentDts=1/0,a.filter(function(a){return a.dts>=c?(b.minSegmentDts=Math.min(b.minSegmentDts,a.dts),b.minSegmentPts=b.minSegmentDts,!0):!1}))},i=function(a){var b,c,d=[];for(b=0;b<a.length;b++)c=a[b],d.push({size:c.data.byteLength,duration:1024});return d},j=function(a){var b,c,d=0,e=new Uint8Array(f(a));for(b=0;b<a.length;b++)c=a[b],e.set(c.data,d),d+=c.data.byteLength;return e};b.exports={prefixWithSilence:g,trimAdtsFramesByEarliestDts:h,generateSampleTable:i,concatenateFrameData:j}},{29:29,7:7}],14:[function(a,b){"use strict";var d=a(23).discardEmulationPreventionBytes,e=a(8).CaptionStream,f=a(15),g=a(25),h=a(27),i=a(26),j=function(a,b){var d,e,c=a;for(d=0;d<b.length;d++){if(e=b[d],c<e.size)return e;c-=e.size}return null},k=function(a,b,c){var g,h,i,k,l,m,e=new DataView(a.buffer,a.byteOffset,a.byteLength),f=[];for(h=0;h+4<a.length;h+=i)if(i=e.getUint32(h),h+=4,!(0>=i))switch(31&a[h]){case 6:if(l=a.subarray(h+1,h+1+i),m=j(h,b),g={nalUnitType:"sei_rbsp",size:i,data:l,escapedRBSP:d(l),trackId:c},m)g.pts=m.pts,g.dts=m.dts,k=m;else{if(!k){console.log("We've encountered a nal unit without data. See mux.js#233.");break}g.pts=k.pts,g.dts=k.dts}f.push(g)}return f},l=function(a,b,c){var d=b,e=c.defaultSampleDuration||0,f=c.defaultSampleSize||0,g=c.trackId,i=[];return a.forEach(function(a){var b=h(a),c=b.samples;c.forEach(function(a){void 0===a.duration&&(a.duration=e),void 0===a.size&&(a.size=f),a.trackId=g,a.dts=d,void 0===a.compositionTimeOffset&&(a.compositionTimeOffset=0),a.pts=d+a.compositionTimeOffset,d+=a.duration}),i=i.concat(c)}),i},m=function(a,b){var c=f(a,["moof","traf"]),d=f(a,["mdat"]),e={},h=[];return d.forEach(function(a,b){var d=c[b];h.push({mdat:a,traf:d})}),h.forEach(function(a){var q,r,c=a.mdat,d=a.traf,h=f(d,["tfhd"]),j=i(h[0]),m=j.trackId,n=f(d,["tfdt"]),o=n.length>0?g(n[0]).baseMediaDecodeTime:0,p=f(d,["trun"]);b===m&&p.length>0&&(q=l(p,o,j),r=k(c,q,m),e[m]||(e[m]=[]),e[m]=e[m].concat(r))}),e},n=function(a,b,c){var d;return null===b?null:(d=m(a,b),{seiNals:d[b],timescale:c})},o=function(){var b,c,d,f,g,h,a=!1;this.isInitialized=function(){return a},this.init=function(c){b=new e,a=!0,h=c?c.isPartial:!1,b.on("data",function(a){a.startTime=a.startPts/f,a.endTime=a.endPts/f,g.captions.push(a),g.captionStreams[a.stream]=!0})},this.isNewInit=function(a,b){return a&&0===a.length||b&&"object"==typeof b&&0===Object.keys(b).length?!1:d!==a[0]||f!==b[d]},this.parse=function(a,b,e){var h,i;if(!this.isInitialized())return null;if(!b||!e)return null;if(this.isNewInit(b,e))d=b[0],f=e[d];else if(null===d||!f)return c.push(a),null;for(;c.length>0;)i=c.shift(),this.parse(i,b,e);return h=n(a,d,f),null!==h&&h.seiNals?(this.pushNals(h.seiNals),this.flushStream(),g):null},this.pushNals=function(a){return this.isInitialized()&&a&&0!==a.length?(a.forEach(function(a){b.push(a)}),void 0):null},this.flushStream=function(){return this.isInitialized()?(h?b.partialFlush():b.flush(),void 0):null},this.clearParsedCaptions=function(){g.captions=[],g.captionStreams={}},this.resetCaptionStream=function(){return this.isInitialized()?(b.reset(),void 0):null},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){c=[],d=null,f=null,g?this.clearParsedCaptions():g={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()};b.exports=o},{15:15,23:23,25:25,26:26,27:27,8:8}],15:[function(a,b){var d=a(28).toUnsigned,e=a(19),f=function(a,b){var g,h,i,j,k,c=[];if(!b.length)return null;for(g=0;g<a.byteLength;)h=d(a[g]<<24|a[g+1]<<16|a[g+2]<<8|a[g+3]),i=e(a.subarray(g+4,g+8)),j=h>1?g+h:a.byteLength,i===b[0]&&(1===b.length?c.push(a.subarray(g+8,j)):(k=f(a.subarray(g+8,j),b.slice(1)),k.length&&(c=c.concat(k)))),g=j;return c};b.exports=f},{19:19,28:28}],16:[function(a,b){var d=function(a){var b,c,d=[],e=[];for(e.byteLength=0,e.nalCount=0,e.duration=0,d.byteLength=0,b=0;b<a.length;b++)c=a[b],"access_unit_delimiter_rbsp"===c.nalUnitType?(d.length&&(d.duration=c.dts-d.dts,e.byteLength+=d.byteLength,e.nalCount+=d.length,e.duration+=d.duration,e.push(d)),d=[c],d.byteLength=c.data.byteLength,d.pts=c.pts,d.dts=c.dts):("slice_layer_without_partitioning_rbsp_idr"===c.nalUnitType&&(d.keyFrame=!0),d.duration=c.dts-d.dts,d.byteLength+=c.data.byteLength,d.push(c));return e.length&&(!d.duration||d.duration<=0)&&(d.duration=e[e.length-1].duration),e.byteLength+=d.byteLength,e.nalCount+=d.length,e.duration+=d.duration,e.push(d),e},e=function(a){var b,c,d=[],e=[];for(d.byteLength=0,d.nalCount=0,d.duration=0,d.pts=a[0].pts,d.dts=a[0].dts,e.byteLength=0,e.nalCount=0,e.duration=0,e.pts=a[0].pts,e.dts=a[0].dts,b=0;b<a.length;b++)c=a[b],c.keyFrame?(d.length&&(e.push(d),e.byteLength+=d.byteLength,e.nalCount+=d.nalCount,e.duration+=d.duration),d=[c],d.nalCount=c.length,d.byteLength=c.byteLength,d.pts=c.pts,d.dts=c.dts,d.duration=c.duration):(d.duration+=c.duration,d.nalCount+=c.length,d.byteLength+=c.byteLength,d.push(c));return e.length&&d.duration<=0&&(d.duration=e[e.length-1].duration),e.byteLength+=d.byteLength,e.nalCount+=d.nalCount,e.duration+=d.duration,e.push(d),e},f=function(a){var b;return!a[0][0].keyFrame&&a.length>1&&(b=a.shift(),a.byteLength-=b.byteLength,a.nalCount-=b.nalCount,a[0][0].dts=b.dts,a[0][0].pts=b.pts,a[0][0].duration+=b.duration),a},g=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},h=function(a,b){var c=g();
return c.dataOffset=b,c.compositionTimeOffset=a.pts-a.dts,c.duration=a.duration,c.size=4*a.length,c.size+=a.byteLength,a.keyFrame&&(c.flags.dependsOn=2,c.flags.isNonSyncSample=0),c},i=function(a,b){var c,d,e,f,g,i=b||0,j=[];for(c=0;c<a.length;c++)for(f=a[c],d=0;d<f.length;d++)g=f[d],e=h(g,i),i+=e.size,j.push(e);return j},j=function(a){var b,c,d,e,f,g,h=0,i=a.byteLength,j=a.nalCount,k=i+4*j,l=new Uint8Array(k),m=new DataView(l.buffer);for(b=0;b<a.length;b++)for(e=a[b],c=0;c<e.length;c++)for(f=e[c],d=0;d<f.length;d++)g=f[d],m.setUint32(h,g.data.byteLength),h+=4,l.set(g.data,h),h+=g.data.byteLength;return l},k=function(a,b){var c,d=b||0,e=[];return c=h(a,d),e.push(c),e},l=function(a){var b,c,d=0,e=a.byteLength,f=a.length,g=e+4*f,h=new Uint8Array(g),i=new DataView(h.buffer);for(b=0;b<a.length;b++)c=a[b],i.setUint32(d,c.data.byteLength),d+=4,h.set(c.data,d),d+=c.data.byteLength;return h};b.exports={groupNalsIntoFrames:d,groupFramesIntoGops:e,extendFirstKeyFrame:f,generateSampleTable:i,concatenateNalData:j,generateSampleTableForFrame:k,concatenateNalDataForFrame:l}},{}],17:[function(a,b){b.exports={generator:a(18),probe:a(20),Transmuxer:a(22).Transmuxer,AudioSegmentStream:a(22).AudioSegmentStream,VideoSegmentStream:a(22).VideoSegmentStream,CaptionParser:a(14)}},{14:14,18:18,20:20,22:22}],18:[function(a,b){"use strict";var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,d=Math.pow(2,32)-1,O=4294967295;!function(){var a;if(A={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(a in A)A.hasOwnProperty(a)&&(A[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);B=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),D=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),C=new Uint8Array([0,0,0,1]),E=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),F=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),G={video:E,audio:F},J=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),I=new Uint8Array([0,0,0,0,0,0,0,0]),K=new Uint8Array([0,0,0,0,0,0,0,0]),L=K,M=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),N=K,H=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),e=function(a){var d,e,f,b=[],c=0;for(d=1;d<arguments.length;d++)b.push(arguments[d]);for(d=b.length;d--;)c+=b[d].byteLength;for(e=new Uint8Array(c+8),f=new DataView(e.buffer,e.byteOffset,e.byteLength),f.setUint32(0,e.byteLength),e.set(a,4),d=0,c=8;d<b.length;d++)e.set(b[d],c),c+=b[d].byteLength;return e},f=function(){return e(A.dinf,e(A.dref,J))},g=function(a){return e(A.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))},h=function(){return e(A.ftyp,B,C,B,D)},t=function(a){return e(A.hdlr,G[a])},i=function(a){return e(A.mdat,a)},s=function(a){var b=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,255&a.duration>>>24,255&a.duration>>>16,255&a.duration>>>8,255&a.duration,85,196,0,0]);return a.samplerate&&(b[12]=255&a.samplerate>>>24,b[13]=255&a.samplerate>>>16,b[14]=255&a.samplerate>>>8,b[15]=255&a.samplerate,a.duration=a.duration/9e4*a.samplerate,b[16]=255&a.duration>>>24,b[17]=255&a.duration>>>16,b[18]=255&a.duration>>>8,b[19]=255&a.duration),e(A.mdhd,b)},r=function(a){return e(A.mdia,s(a),t(a.type),k(a))},j=function(a){return e(A.mfhd,new Uint8Array([0,0,0,0,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a]))},k=function(a){return e(A.minf,"video"===a.type?e(A.vmhd,H):e(A.smhd,I),f(),v(a))},l=function(a,b){for(var c=[],d=b.length;d--;)c[d]=x(b[d]);return e.apply(null,[A.moof,j(a)].concat(c))},m=function(a){for(var b=a.length,c=[];b--;)c[b]=p(a[b]);return e.apply(null,[A.moov,o(O)].concat(c).concat(n(a)))},n=function(a){for(var b=a.length,c=[];b--;)c[b]=y(a[b]);return e.apply(null,[A.mvex].concat(c))},o=function(a){var b=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e(A.mvhd,b)},u=function(a){var d,f,b=a.samples||[],c=new Uint8Array(4+b.length);for(f=0;f<b.length;f++)d=b[f].flags,c[f+4]=d.dependsOn<<4|d.isDependedOn<<2|d.hasRedundancy;return e(A.sdtp,c)},v=function(a){return e(A.stbl,w(a),e(A.stts,N),e(A.stsc,L),e(A.stsz,M),e(A.stco,K))},function(){var a,b;w=function(c){return e(A.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===c.type?a(c):b(c))},a=function(a){var g,h,i,j,b=a.sps||[],c=a.pps||[],d=[],f=[];for(g=0;g<b.length;g++)d.push((65280&b[g].byteLength)>>>8),d.push(255&b[g].byteLength),d=d.concat(Array.prototype.slice.call(b[g]));for(g=0;g<c.length;g++)f.push((65280&c[g].byteLength)>>>8),f.push(255&c[g].byteLength),f=f.concat(Array.prototype.slice.call(c[g]));return h=[A.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&a.width)>>8,255&a.width,(65280&a.height)>>8,255&a.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),e(A.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([b.length],d,[c.length],f))),e(A.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],a.sarRatio&&(i=a.sarRatio[0],j=a.sarRatio[1],h.push(e(A.pasp,new Uint8Array([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i,(4278190080&j)>>24,(16711680&j)>>16,(65280&j)>>8,255&j])))),e.apply(null,h)},b=function(a){return e(A.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&a.channelcount)>>8,255&a.channelcount,(65280&a.samplesize)>>8,255&a.samplesize,0,0,0,0,(65280&a.samplerate)>>8,255&a.samplerate,0,0]),g(a))}}(),q=function(a){var b=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,0,(4278190080&a.duration)>>24,(16711680&a.duration)>>16,(65280&a.duration)>>8,255&a.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&a.width)>>8,255&a.width,0,0,(65280&a.height)>>8,255&a.height,0,0]);return e(A.tkhd,b)},x=function(a){var b,c,f,g,h,i,j;return b=e(A.tfhd,new Uint8Array([0,0,0,58,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),i=Math.floor(a.baseMediaDecodeTime/(d+1)),j=Math.floor(a.baseMediaDecodeTime%(d+1)),c=e(A.tfdt,new Uint8Array([1,0,0,0,255&i>>>24,255&i>>>16,255&i>>>8,255&i,255&j>>>24,255&j>>>16,255&j>>>8,255&j])),h=92,"audio"===a.type?(f=z(a,h),e(A.traf,b,c,f)):(g=u(a),f=z(a,g.length+h),e(A.traf,b,c,f,g))},p=function(a){return a.duration=a.duration||O,e(A.trak,q(a),r(a))},y=function(a){var b=new Uint8Array([0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==a.type&&(b[b.length-1]=0),e(A.trex,b)},function(){var a,b,c;c=function(a,b){var c=0,d=0,e=0,f=0;return a.length&&(void 0!==a[0].duration&&(c=1),void 0!==a[0].size&&(d=2),void 0!==a[0].flags&&(e=4),void 0!==a[0].compositionTimeOffset&&(f=8)),[0,0,c|d|e|f,1,(4278190080&a.length)>>>24,(16711680&a.length)>>>16,(65280&a.length)>>>8,255&a.length,(4278190080&b)>>>24,(16711680&b)>>>16,(65280&b)>>>8,255&b]},b=function(a,b){var d,f,g,h,i,j;for(h=a.samples||[],b+=20+16*h.length,g=c(h,b),f=new Uint8Array(g.length+16*h.length),f.set(g),d=g.length,j=0;j<h.length;j++)i=h[j],f[d++]=(4278190080&i.duration)>>>24,f[d++]=(16711680&i.duration)>>>16,f[d++]=(65280&i.duration)>>>8,f[d++]=255&i.duration,f[d++]=(4278190080&i.size)>>>24,f[d++]=(16711680&i.size)>>>16,f[d++]=(65280&i.size)>>>8,f[d++]=255&i.size,f[d++]=i.flags.isLeading<<2|i.flags.dependsOn,f[d++]=i.flags.isDependedOn<<6|i.flags.hasRedundancy<<4|i.flags.paddingValue<<1|i.flags.isNonSyncSample,f[d++]=61440&i.flags.degradationPriority,f[d++]=15&i.flags.degradationPriority,f[d++]=(4278190080&i.compositionTimeOffset)>>>24,f[d++]=(16711680&i.compositionTimeOffset)>>>16,f[d++]=(65280&i.compositionTimeOffset)>>>8,f[d++]=255&i.compositionTimeOffset;return e(A.trun,f)},a=function(a,b){var d,f,g,h,i,j;for(h=a.samples||[],b+=20+8*h.length,g=c(h,b),d=new Uint8Array(g.length+8*h.length),d.set(g),f=g.length,j=0;j<h.length;j++)i=h[j],d[f++]=(4278190080&i.duration)>>>24,d[f++]=(16711680&i.duration)>>>16,d[f++]=(65280&i.duration)>>>8,d[f++]=255&i.duration,d[f++]=(4278190080&i.size)>>>24,d[f++]=(16711680&i.size)>>>16,d[f++]=(65280&i.size)>>>8,d[f++]=255&i.size;return e(A.trun,d)},z=function(c,d){return"audio"===c.type?a(c,d):b(c,d)}}(),b.exports={ftyp:h,mdat:i,moof:l,moov:m,setDuration:function(a){a&&(O=9e4*a)},initSegment:function(a){var d,b=h(),c=m(a);return d=new Uint8Array(b.byteLength+c.byteLength),d.set(b),d.set(c,b.byteLength),d}}},{}],19:[function(a,b){var d=function(a){var b="";return b+=String.fromCharCode(a[0]),b+=String.fromCharCode(a[1]),b+=String.fromCharCode(a[2]),b+=String.fromCharCode(a[3])};b.exports=d},{}],20:[function(a,b){"use strict";var d=a(28).toUnsigned,e=a(28).toHexString,f=a(15),g=a(19),h=a(26),i=a(27),j=a(25),k=function(a){var b={},c=f(a,["moov","trak"]);return c.reduce(function(a,b){var c,e,g,h,i;return(c=f(b,["tkhd"])[0])?(e=c[0],g=0===e?12:20,h=d(c[g]<<24|c[g+1]<<16|c[g+2]<<8|c[g+3]),(i=f(b,["mdia","mdhd"])[0])?(e=i[0],g=0===e?12:20,a[h]=d(i[g]<<24|i[g+1]<<16|i[g+2]<<8|i[g+3]),a):null):null},b)},l=function(a,b){var c,e,g;return c=f(b,["moof","traf"]),e=[].concat.apply([],c.map(function(b){return f(b,["tfhd"]).map(function(c){var e,g,h;return e=d(c[4]<<24|c[5]<<16|c[6]<<8|c[7]),g=a[e]||9e4,h=f(b,["tfdt"]).map(function(a){var b,c;return b=a[0],c=d(a[4]<<24|a[5]<<16|a[6]<<8|a[7]),1===b&&(c*=Math.pow(2,32),c+=d(a[8]<<24|a[9]<<16|a[10]<<8|a[11])),c})[0],h=h||1/0,h/g})})),g=Math.min.apply(null,e),isFinite(g)?g:0},m=function(a,b){var g,k,l,m,n,o,p,q,c=f(b,["moof","traf"]),d=0,e=0;return c&&c.length&&(k=f(c[0],["tfhd"])[0],l=f(c[0],["trun"])[0],m=f(c[0],["tfdt"])[0],k&&(n=h(k),g=n.trackId),m&&(o=j(m),d=o.baseMediaDecodeTime),l&&(p=i(l),p.samples&&p.samples.length&&(e=p.samples[0].compositionTimeOffset||0))),q=a[g]||9e4,(d+e)/q},n=function(a){var b=f(a,["moov","trak"]),c=[];return b.forEach(function(a){var b=f(a,["mdia","hdlr"]),d=f(a,["tkhd"]);b.forEach(function(a,b){var h,i,j,e=g(a.subarray(8,12)),f=d[b];"vide"===e&&(h=new DataView(f.buffer,f.byteOffset,f.byteLength),i=h.getUint8(0),j=0===i?h.getUint32(12):h.getUint32(20),c.push(j))})}),c},p=function(a){var b=a[0],c=0===b?12:20;return d(a[c]<<24|a[c+1]<<16|a[c+2]<<8|a[c+3])},o=function(a){var b=f(a,["moov","trak"]),c=[];return b.forEach(function(a){var h,i,j,k,l,m,n,o,q,r,b={},d=f(a,["tkhd"])[0];d&&(h=new DataView(d.buffer,d.byteOffset,d.byteLength),i=h.getUint8(0),b.id=0===i?h.getUint32(12):h.getUint32(20)),j=f(a,["mdia","hdlr"])[0],j&&(k=g(j.subarray(8,12)),b.type="vide"===k?"video":"soun"===k?"audio":k),l=f(a,["mdia","minf","stbl","stsd"])[0],l&&(m=l.subarray(8),b.codec=g(m.subarray(4,8)),n=f(m,[b.codec])[0],n&&(/^[a-z]vc[1-9]$/i.test(b.codec)?(o=n.subarray(78),q=g(o.subarray(4,8)),"avcC"===q&&o.length>11?(b.codec+=".",b.codec+=e(o[9]),b.codec+=e(o[10]),b.codec+=e(o[11])):b.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(b.codec)&&(o=n.subarray(28),q=g(o.subarray(4,8)),"esds"===q&&o.length>20&&0!==o[19]?(b.codec+="."+e(o[19]),b.codec+="."+e(63&o[20]>>>2).replace(/^0/,"")):b.codec="mp4a.40.2"))),r=f(a,["mdia","mdhd"])[0],r&&(b.timescale=p(r)),c.push(b)}),c};b.exports={findBox:f,parseType:g,timescale:k,startTime:l,compositionStartTime:m,videoTrackIds:n,tracks:o,getTimescaleFromMediaHeader:p}},{15:15,19:19,25:25,26:26,27:27,28:28}],21:[function(a,b){var d=a(29).ONE_SECOND_IN_TS,e=function(a,b){"number"==typeof b.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=b.pts),a.minSegmentPts=void 0===a.minSegmentPts?b.pts:Math.min(a.minSegmentPts,b.pts),a.maxSegmentPts=void 0===a.maxSegmentPts?b.pts:Math.max(a.maxSegmentPts,b.pts)),"number"==typeof b.dts&&(void 0===a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=b.dts),a.minSegmentDts=void 0===a.minSegmentDts?b.dts:Math.min(a.minSegmentDts,b.dts),a.maxSegmentDts=void 0===a.maxSegmentDts?b.dts:Math.max(a.maxSegmentDts,b.dts))},f=function(a){delete a.minSegmentDts,delete a.maxSegmentDts,delete a.minSegmentPts,delete a.maxSegmentPts},g=function(a,b){var c,e,f=a.minSegmentDts;return b||(f-=a.timelineStartInfo.dts),c=a.timelineStartInfo.baseMediaDecodeTime,c+=f,c=Math.max(0,c),"audio"===a.type&&(e=a.samplerate/d,c*=e,c=Math.floor(c)),c};b.exports={clearDtsInfo:f,calculateTrackBaseMediaDecodeTime:g,collectDtsInfo:e}},{29:29}],22:[function(a,b){"use strict";var r,t,u,d=a(31),e=a(18),f=a(16),g=a(13),h=a(21),i=a(9),j=a(29),k=a(3),l=a(4).H264Stream,m=a(1),n=a(2).isLikelyAacData,o=a(29).ONE_SECOND_IN_TS,p=a(5),q=a(6),v=function(a,b){var c;if(a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0},w=function(a,b,c,d,e,f){var g=c-b,h=d-b,i=e-c;return{start:{dts:a,pts:a+g},end:{dts:a+h,pts:a+i},prependedContentDuration:f,baseMediaDecodeTime:a}},s=function(a,b){var c=[],d=0,f=0,i=0,j=1/0;b=b||{},s.prototype.init.call(this),this.push=function(b){h.collectDtsInfo(a,b),a&&p.forEach(function(c){a[c]=b[c]}),c.push(b)},this.setEarliestDts=function(a){f=a},this.setVideoBaseMediaDecodeTime=function(a){j=a},this.setAudioAppendStart=function(a){i=a},this.flush=function(){var k,l,m,n,p;return 0===c.length?(this.trigger("done","AudioSegmentStream"),void 0):(k=g.trimAdtsFramesByEarliestDts(c,a,f),a.baseMediaDecodeTime=h.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps),g.prefixWithSilence(a,k,i,j),a.samples=g.generateSampleTable(k),m=e.mdat(g.concatenateFrameData(k)),c=[],l=e.moof(d,[a]),n=new Uint8Array(l.byteLength+m.byteLength),d++,n.set(l),n.set(m,l.byteLength),h.clearDtsInfo(a),p=Math.ceil(1024*o/a.samplerate),k.length&&this.trigger("timingInfo",{start:k[0].pts,end:k[0].pts+k.length*p}),this.trigger("data",{track:a,boxes:n}),this.trigger("done","AudioSegmentStream"),void 0)},this.reset=function(){h.clearDtsInfo(a),c=[],this.trigger("reset")}};s.prototype=new d,r=function(a,b){var i,j,c=0,d=[],g=[];b=b||{},r.prototype.init.call(this),delete a.minPTS,this.gopCache_=[],this.push=function(b){h.collectDtsInfo(a,b),"seq_parameter_set_rbsp"!==b.nalUnitType||i||(i=b.config,a.sps=[b.data],q.forEach(function(b){a[b]=i[b]},this)),"pic_parameter_set_rbsp"!==b.nalUnitType||j||(j=b.data,a.pps=[b.data]),d.push(b)},this.flush=function(){for(var i,j,k,l,m,n,p,q,r,o=0;d.length&&"access_unit_delimiter_rbsp"!==d[0].nalUnitType;)d.shift();if(0===d.length)return this.resetStream_(),this.trigger("done","VideoSegmentStream"),void 0;if(i=f.groupNalsIntoFrames(d),k=f.groupFramesIntoGops(i),k[0][0].keyFrame||(j=this.getGopForFusion_(d[0],a),j?(o=j.duration,k.unshift(j),k.byteLength+=j.byteLength,k.nalCount+=j.nalCount,k.pts=j.pts,k.dts=j.dts,k.duration+=j.duration):k=f.extendFirstKeyFrame(k)),g.length){if(r=b.alignGopsAtEnd?this.alignGopsAtEnd_(k):this.alignGopsAtStart_(k),!r)return this.gopCache_.unshift({gop:k.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),d=[],this.resetStream_(),this.trigger("done","VideoSegmentStream"),void 0;h.clearDtsInfo(a),k=r}h.collectDtsInfo(a,k),a.samples=f.generateSampleTable(k),m=e.mdat(f.concatenateNalData(k)),a.baseMediaDecodeTime=h.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps),this.trigger("processedGopsInfo",k.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}})),p=k[0],q=k[k.length-1],this.trigger("segmentTimingInfo",w(a.baseMediaDecodeTime,p.dts,p.pts,q.dts+q.duration,q.pts+q.duration,o)),this.trigger("timingInfo",{start:k[0].pts,end:k[k.length-1].pts+k[k.length-1].duration}),this.gopCache_.unshift({gop:k.pop(),pps:a.pps,sps:a.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),d=[],this.trigger("baseMediaDecodeTime",a.baseMediaDecodeTime),this.trigger("timelineStartInfo",a.timelineStartInfo),l=e.moof(c,[a]),n=new Uint8Array(l.byteLength+m.byteLength),c++,n.set(l),n.set(m,l.byteLength),this.trigger("data",{track:a,boxes:n}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),d=[],this.gopCache_.length=0,g.length=0,this.trigger("reset")},this.resetStream_=function(){h.clearDtsInfo(a),i=void 0,j=void 0},this.getGopForFusion_=function(b){var f,g,h,i,j,c=45e3,d=1e4,e=1/0;for(j=0;j<this.gopCache_.length;j++)i=this.gopCache_[j],h=i.gop,a.pps&&v(a.pps[0],i.pps[0])&&a.sps&&v(a.sps[0],i.sps[0])&&(h.dts<a.timelineStartInfo.dts||(f=b.dts-h.dts-h.duration,f>=-d&&c>=f&&(!g||e>f)&&(g=i,e=f)));return g?g.gop:null},this.alignGopsAtStart_=function(a){var b,c,d,e,f,h,i,j;for(f=a.byteLength,h=a.nalCount,i=a.duration,b=c=0;b<g.length&&c<a.length&&(d=g[b],e=a[c],d.pts!==e.pts);)e.pts>d.pts?b++:(c++,f-=e.byteLength,h-=e.nalCount,i-=e.duration);return 0===c?a:c===a.length?null:(j=a.slice(c),j.byteLength=f,j.duration=i,j.nalCount=h,j.pts=j[0].pts,j.dts=j[0].dts,j)},this.alignGopsAtEnd_=function(a){for(var d,e,i,j,k,b=g.length-1,c=a.length-1,f=null,h=!1;b>=0&&c>=0;){if(d=g[b],e=a[c],d.pts===e.pts){h=!0;break}d.pts>e.pts?b--:(b===g.length-1&&(f=c),c--)}return h||null!==f?(i=h?c:f,0===i?a:(j=a.slice(i),k=j.reduce(function(a,b){return a.byteLength+=b.byteLength,a.duration+=b.duration,a.nalCount+=b.nalCount,a},{byteLength:0,duration:0,nalCount:0}),j.byteLength=k.byteLength,j.duration=k.duration,j.nalCount=k.nalCount,j.pts=j[0].pts,j.dts=j[0].dts,j)):null},this.alignGopsWith=function(a){g=a}},r.prototype=new d,u=function(a,b){this.numberOfTracks=0,this.metadataStream=b,a=a||{},this.remuxTracks="undefined"!=typeof a.remux?!!a.remux:!0,this.keepOriginalTimestamps="boolean"==typeof a.keepOriginalTimestamps?a.keepOriginalTimestamps:!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,u.prototype.init.call(this),this.push=function(a){return a.text?this.pendingCaptions.push(a):a.frames?this.pendingMetadata.push(a):(this.pendingTracks.push(a.track),this.pendingBytes+=a.boxes.byteLength,"video"===a.track.type&&(this.videoTrack=a.track,this.pendingBoxes.push(a.boxes)),"audio"===a.track.type&&(this.audioTrack=a.track,this.pendingBoxes.unshift(a.boxes)),void 0)}},u.prototype=new d,u.prototype.flush=function(a){var d,f,g,i,b=0,c={captions:[],captionStreams:{},metadata:[],info:{}},h=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0),void 0}if(this.videoTrack?(h=this.videoTrack.timelineStartInfo.pts,q.forEach(function(a){c.info[a]=this.videoTrack[a]},this)):this.audioTrack&&(h=this.audioTrack.timelineStartInfo.pts,p.forEach(function(a){c.info[a]=this.audioTrack[a]},this)),this.videoTrack||this.audioTrack){for(c.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,g=e.initSegment(this.pendingTracks),c.initSegment=new Uint8Array(g.byteLength),c.initSegment.set(g),c.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)c.data.set(this.pendingBoxes[i],b),b+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)d=this.pendingCaptions[i],d.startTime=j.metadataTsToSeconds(d.startPts,h,this.keepOriginalTimestamps),d.endTime=j.metadataTsToSeconds(d.endPts,h,this.keepOriginalTimestamps),c.captionStreams[d.stream]=!0,c.captions.push(d);for(i=0;i<this.pendingMetadata.length;i++)f=this.pendingMetadata[i],f.cueTime=j.metadataTsToSeconds(f.pts,h,this.keepOriginalTimestamps),c.metadata.push(f);for(c.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",c),i=0;i<c.captions.length;i++)d=c.captions[i],this.trigger("caption",d);for(i=0;i<c.metadata.length;i++)f=c.metadata[i],this.trigger("id3Frame",f)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},u.prototype.setRemux=function(a){this.remuxTracks=a},t=function(a){var d,f,b=this,c=!0;t.prototype.init.call(this),a=a||{},this.baseMediaDecodeTime=a.baseMediaDecodeTime||0,this.transmuxPipeline_={},e.setDuration(a.duration),this.setupAacPipeline=function(){var c={};this.transmuxPipeline_=c,c.type="aac",c.metadataStream=new i.MetadataStream,c.aacStream=new m,c.audioTimestampRolloverStream=new i.TimestampRolloverStream("audio"),c.timedMetadataTimestampRolloverStream=new i.TimestampRolloverStream("timed-metadata"),c.adtsStream=new k,c.coalesceStream=new u(a,c.metadataStream),c.headOfPipeline=c.aacStream,c.aacStream.pipe(c.audioTimestampRolloverStream).pipe(c.adtsStream),c.aacStream.pipe(c.timedMetadataTimestampRolloverStream).pipe(c.metadataStream).pipe(c.coalesceStream),c.metadataStream.on("timestamp",function(a){c.aacStream.setTimestamp(a.timeStamp)}),c.aacStream.on("data",function(e){"timed-metadata"!==e.type&&"audio"!==e.type||c.audioSegmentStream||(f=f||{timelineStartInfo:{baseMediaDecodeTime:b.baseMediaDecodeTime},codec:"adts",type:"audio"},c.coalesceStream.numberOfTracks++,c.audioSegmentStream=new s(f,a),c.audioSegmentStream.on("timingInfo",b.trigger.bind(b,"audioTimingInfo")),c.adtsStream.pipe(c.audioSegmentStream).pipe(c.coalesceStream),b.trigger("trackinfo",{hasAudio:!!f,hasVideo:!!d}))}),c.coalesceStream.on("data",this.trigger.bind(this,"data")),c.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var c={};this.transmuxPipeline_=c,c.type="ts",c.metadataStream=new i.MetadataStream,c.packetStream=new i.TransportPacketStream,c.parseStream=new i.TransportParseStream,c.elementaryStream=new i.ElementaryStream,c.timestampRolloverStream=new i.TimestampRolloverStream,c.adtsStream=new k,c.h264Stream=new l,c.captionStream=new i.CaptionStream,c.coalesceStream=new u(a,c.metadataStream),c.headOfPipeline=c.packetStream,c.packetStream.pipe(c.parseStream).pipe(c.elementaryStream).pipe(c.timestampRolloverStream),c.timestampRolloverStream.pipe(c.h264Stream),c.timestampRolloverStream.pipe(c.adtsStream),c.timestampRolloverStream.pipe(c.metadataStream).pipe(c.coalesceStream),c.h264Stream.pipe(c.captionStream).pipe(c.coalesceStream),c.elementaryStream.on("data",function(e){var g;if("metadata"===e.type){for(g=e.tracks.length;g--;)d||"video"!==e.tracks[g].type?f||"audio"!==e.tracks[g].type||(f=e.tracks[g],f.timelineStartInfo.baseMediaDecodeTime=b.baseMediaDecodeTime):(d=e.tracks[g],d.timelineStartInfo.baseMediaDecodeTime=b.baseMediaDecodeTime);d&&!c.videoSegmentStream&&(c.coalesceStream.numberOfTracks++,c.videoSegmentStream=new r(d,a),c.videoSegmentStream.on("timelineStartInfo",function(d){f&&!a.keepOriginalTimestamps&&(f.timelineStartInfo=d,c.audioSegmentStream.setEarliestDts(d.dts-b.baseMediaDecodeTime))}),c.videoSegmentStream.on("processedGopsInfo",b.trigger.bind(b,"gopInfo")),c.videoSegmentStream.on("segmentTimingInfo",b.trigger.bind(b,"videoSegmentTimingInfo")),c.videoSegmentStream.on("baseMediaDecodeTime",function(a){f&&c.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),c.videoSegmentStream.on("timingInfo",b.trigger.bind(b,"videoTimingInfo")),c.h264Stream.pipe(c.videoSegmentStream).pipe(c.coalesceStream)),f&&!c.audioSegmentStream&&(c.coalesceStream.numberOfTracks++,c.audioSegmentStream=new s(f,a),c.audioSegmentStream.on("timingInfo",b.trigger.bind(b,"audioTimingInfo")),c.adtsStream.pipe(c.audioSegmentStream).pipe(c.coalesceStream)),b.trigger("trackinfo",{hasAudio:!!f,hasVideo:!!d})}}),c.coalesceStream.on("data",this.trigger.bind(this,"data")),c.coalesceStream.on("id3Frame",function(a){a.dispatchType=c.metadataStream.dispatchType,b.trigger("id3Frame",a)}),c.coalesceStream.on("caption",this.trigger.bind(this,"caption")),c.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(b){var c=this.transmuxPipeline_;a.keepOriginalTimestamps||(this.baseMediaDecodeTime=b),f&&(f.timelineStartInfo.dts=void 0,f.timelineStartInfo.pts=void 0,h.clearDtsInfo(f),c.audioTimestampRolloverStream&&c.audioTimestampRolloverStream.discontinuity()),d&&(c.videoSegmentStream&&(c.videoSegmentStream.gopCache_=[]),d.timelineStartInfo.dts=void 0,d.timelineStartInfo.pts=void 0,h.clearDtsInfo(d),c.captionStream.reset()),c.timestampRolloverStream&&c.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(a){f&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)},this.setRemux=function(b){var c=this.transmuxPipeline_;a.remux=b,c&&c.coalesceStream&&c.coalesceStream.setRemux(b)},this.alignGopsWith=function(a){d&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(a)},this.push=function(a){if(c){var b=n(a);b&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():b||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),c=!1}this.transmuxPipeline_.headOfPipeline.push(a)},this.flush=function(){c=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},t.prototype=new d,b.exports={Transmuxer:t,VideoSegmentStream:r,AudioSegmentStream:s,AUDIO_PROPERTIES:p,VIDEO_PROPERTIES:q,generateVideoSegmentTimingInfo:w}},{1:1,13:13,16:16,18:18,2:2,21:21,29:29,3:3,31:31,4:4,5:5,6:6,9:9}],23:[function(a,b){"use strict";var d=4,e=128,f=function(a){for(var h,b=0,c={payloadType:-1,payloadSize:0},f=0,g=0;b<a.byteLength&&a[b]!==e;){for(;255===a[b];)f+=255,b++;for(f+=a[b++];255===a[b];)g+=255,b++;if(g+=a[b++],!c.payload&&f===d){if(h=String.fromCharCode(a[b+3],a[b+4],a[b+5],a[b+6]),"GA94"===h){c.payloadType=f,c.payloadSize=g,c.payload=a.subarray(b,b+g);break}c.payload=void 0}b+=g,f=0,g=0}return c},g=function(a){return 181!==a.payload[0]?null:49!==(a.payload[1]<<8|a.payload[2])?null:"GA94"!==String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])?null:3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},h=function(a,b){var d,e,f,g,c=[];if(!(64&b[0]))return c;for(e=31&b[0],d=0;e>d;d++)f=3*d,g={type:3&b[f+2],pts:a},4&b[f+2]&&(g.ccData=b[f+3]<<8|b[f+4],c.push(g));return c},i=function(a){for(var e,f,g,b=a.byteLength,c=[],d=1;b-2>d;)0===a[d]&&0===a[d+1]&&3===a[d+2]?(c.push(d+2),d+=2):d++;if(0===c.length)return a;for(e=b-c.length,f=new Uint8Array(e),g=0,d=0;e>d;g++,d++)g===c[0]&&(g++,c.shift()),f[d]=a[g];return f};b.exports={parseSei:f,parseUserData:g,parseCaptionPackets:h,discardEmulationPreventionBytes:i,USER_DATA_REGISTERED_ITU_T_T35:d}},{}],24:[function(a,b){var d=function(a){return{isLeading:(12&a[0])>>>2,dependsOn:3&a[0],isDependedOn:(192&a[1])>>>6,hasRedundancy:(48&a[1])>>>4,paddingValue:(14&a[1])>>>1,isNonSyncSample:1&a[1],degradationPriority:a[2]<<8|a[3]}};b.exports=d},{}],25:[function(a,b){var d=a(28).toUnsigned,e=function(a){var b={version:a[0],flags:new Uint8Array(a.subarray(1,4)),baseMediaDecodeTime:d(a[4]<<24|a[5]<<16|a[6]<<8|a[7])};return 1===b.version&&(b.baseMediaDecodeTime*=Math.pow(2,32),b.baseMediaDecodeTime+=d(a[8]<<24|a[9]<<16|a[10]<<8|a[11])),b};b.exports=e},{28:28}],26:[function(a,b){var d=function(a){var k,b=new DataView(a.buffer,a.byteOffset,a.byteLength),c={version:a[0],flags:new Uint8Array(a.subarray(1,4)),trackId:b.getUint32(4)},d=1&c.flags[2],e=2&c.flags[2],f=8&c.flags[2],g=16&c.flags[2],h=32&c.flags[2],i=65536&c.flags[0],j=131072&c.flags[0];return k=8,d&&(k+=4,c.baseDataOffset=b.getUint32(12),k+=4),e&&(c.sampleDescriptionIndex=b.getUint32(k),k+=4),f&&(c.defaultSampleDuration=b.getUint32(k),k+=4),g&&(c.defaultSampleSize=b.getUint32(k),k+=4),h&&(c.defaultSampleFlags=b.getUint32(k)),i&&(c.durationIsEmpty=!0),!d&&j&&(c.baseDataOffsetIsMoof=!0),c};b.exports=d},{}],27:[function(a,b){var d=a(24),e=function(a){var m,b={version:a[0],flags:new Uint8Array(a.subarray(1,4)),samples:[]},c=new DataView(a.buffer,a.byteOffset,a.byteLength),e=1&b.flags[2],f=4&b.flags[2],g=1&b.flags[1],h=2&b.flags[1],i=4&b.flags[1],j=8&b.flags[1],k=c.getUint32(4),l=8;for(e&&(b.dataOffset=c.getInt32(l),l+=4),f&&k&&(m={flags:d(a.subarray(l,l+4))},l+=4,g&&(m.duration=c.getUint32(l),l+=4),h&&(m.size=c.getUint32(l),l+=4),j&&(m.compositionTimeOffset=1===b.version?c.getInt32(l):c.getUint32(l),l+=4),b.samples.push(m),k--);k--;)m={},g&&(m.duration=c.getUint32(l),l+=4),h&&(m.size=c.getUint32(l),l+=4),i&&(m.flags=d(a.subarray(l,l+4)),l+=4),j&&(m.compositionTimeOffset=1===b.version?c.getInt32(l):c.getUint32(l),l+=4),b.samples.push(m);return b};b.exports=e},{24:24}],28:[function(a,b){var d=function(a){return a>>>0},e=function(a){return("00"+a.toString(16)).slice(-2)};b.exports={toUnsigned:d,toHexString:e}},{}],29:[function(a,b){var e,f,g,h,i,j,k,d=9e4;e=function(a){return a*d},f=function(a,b){return a*b},g=function(a){return a/d},h=function(a,b){return a/b},i=function(a,b){return e(h(a,b))},j=function(a,b){return f(g(a),b)},k=function(a,b,c){return g(c?a:a-b)},b.exports={ONE_SECOND_IN_TS:d,secondsToVideoTs:e,secondsToAudioTs:f,videoTsToSeconds:g,audioTsToSeconds:h,audioTsToVideoTs:i,videoTsToAudioTs:j,metadataTsToSeconds:k}},{}],30:[function(a,b){"use strict";var d;d=function(a){var b=a.byteLength,c=0,d=0;this.length=function(){return 8*b},this.bitsAvailable=function(){return 8*b+d},this.loadWord=function(){var e=a.byteLength-b,f=new Uint8Array(4),g=Math.min(4,b);if(0===g)throw new Error("no bytes available");f.set(a.subarray(e,e+g)),c=new DataView(f.buffer).getUint32(0),d=8*g,b-=g},this.skipBits=function(a){var e;d>a?(c<<=a,d-=a):(a-=d,e=Math.floor(a/8),a-=8*e,b-=e,this.loadWord(),c<<=a,d-=a)},this.readBits=function(a){var e=Math.min(d,a),f=c>>>32-e;return d-=e,d>0?c<<=e:b>0&&this.loadWord(),e=a-e,e>0?f<<e|this.readBits(e):f},this.skipLeadingZeros=function(){var a;for(a=0;d>a;++a)if(0!==(c&2147483648>>>a))return c<<=a,d-=a,a;return this.loadWord(),a+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1},this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},b.exports=d},{}],31:[function(a,b){"use strict";var d=function(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]),a[b]=a[b].concat(c)},this.off=function(b,c){var d;return a[b]?(d=a[b].indexOf(c),a[b]=a[b].slice(),a[b].splice(d,1),d>-1):!1},this.trigger=function(b){var c,d,e,f;if(c=a[b])if(2===arguments.length)for(e=c.length,d=0;e>d;++d)c[d].call(this,arguments[1]);else{for(f=[],d=arguments.length,d=1;d<arguments.length;++d)f.push(arguments[d]);for(e=c.length,d=0;e>d;++d)c[d].apply(this,f)}},this.dispose=function(){a={}}}};d.prototype.pipe=function(a){return this.on("data",function(b){a.push(b)}),this.on("done",function(b){a.flush(b)}),this.on("partialdone",function(b){a.partialFlush(b)}),this.on("endedtimeline",function(b){a.endTimeline(b)}),this.on("reset",function(b){a.reset(b)}),a},d.prototype.push=function(a){this.trigger("data",a)},d.prototype.flush=function(a){this.trigger("done",a)},d.prototype.partialFlush=function(a){this.trigger("partialdone",a)
},d.prototype.endTimeline=function(a){this.trigger("endedtimeline",a)},d.prototype.reset=function(a){this.trigger("reset",a)},b.exports=d},{}]},{},[17])(17)});